<div class="flex h-full w-full flex-col p-4 print:hidden">
    <!-- Toolbar -->
    <div
        class="mb-4 flex flex-col gap-2 bg-blue-400 sm:flex-row sm:items-center sm:justify-between"
    >
        <div class="card w-full">
            <p-table
                #dt1
                sortField="id"
                [sortOrder]="-1"
                [value]="datas"
                [columns]="cols"
                [rows]="request.rows"
                [first]="request.first"
                showGridlines
                stripedRows
                [paginator]="true"
                [loading]="loading"
                [rows]="10"
                [scrollable]="true"
                [tableStyle]="{ 'min-width': '50rem' }"
                [rowsPerPageOptions]="[10, 20, 50, 100]"
                [totalRecords]="this.total"
                [showCurrentPageReport]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [lazy]="true"
                (onLazyLoad)="loadLazy($event)"
            >
                <ng-template #caption>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold">Data Employee</span>
                        </div>
                        <div class="flex gap-2">
                            <p-button
                                label="Clear Filter"
                                [outlined]="true"
                                icon="pi pi-filter-slash"
                                (click)="clear(dt1)"
                            />
                            <p-button
                                icon="pi pi-external-link"
                                label="Export"
                                (click)="exportExcel()"
                            />
                            <p-iconfield iconPosition="left" class="ml-auto">
                                <p-inputicon>
                                    <i class="pi pi-search"></i>
                                </p-inputicon>
                                <input
                                    pInputText
                                    type="text"
                                    (input)="
                                        dt1.filterGlobal(
                                            $event.target.value,
                                            'contains'
                                        )
                                    "
                                    placeholder="Search keyword"
                                />
                            </p-iconfield>
                        </div>
                    </div>
                </ng-template>
                <ng-template #header let-columns>
                    <tr>
                        <th
                            *ngFor="let col of columns"
                            [pSortableColumn]="col.sortable ? col.field : null"
                        >
                            <div class="flex items-center justify-between">
                                {{ col.header.toUpperCase() }}
                                <div
                                    class="ml-4 flex items-center justify-between"
                                >
                                    <ng-container *ngIf="col.sortable" class="">
                                        <p-sortIcon
                                            [field]="col.field"
                                        ></p-sortIcon>
                                        <p-columnFilter
                                            [type]="col.filterType || 'text'"
                                            [field]="col.field"
                                            [showOperator]="false"
                                            [showAddButton]="false"
                                            [matchMode]="
                                                col.filterType === 'select'
                                                    ? 'in'
                                                    : 'equals'
                                            "
                                            display="menu"
                                        >
                                            @if (col.filterType === 'select') {
                                                <ng-template
                                                    #filter
                                                    let-value
                                                    let-filter="filterCallback"
                                                >
                                                    <p-multiselect
                                                        [(ngModel)]="value"
                                                        [options]="
                                                            this[
                                                                col.field +
                                                                    'Data'
                                                            ]
                                                        "
                                                        placeholder="Select {{
                                                            col.header
                                                        }}"
                                                        (onChange)="
                                                            filter($event.value)
                                                        "
                                                        optionLabel="label"
                                                        style="min-width: 10rem"
                                                        [panelStyle]="{
                                                            minWidth: '10rem',
                                                        }"
                                                    >
                                                        <ng-template
                                                            let-option
                                                            #item
                                                        >
                                                            <div
                                                                class="flex items-center gap-2"
                                                            >
                                                                <span>{{
                                                                    option.label
                                                                }}</span>
                                                            </div>
                                                        </ng-template>
                                                    </p-multiselect>
                                                </ng-template>
                                            }
                                        </p-columnFilter>
                                    </ng-container>
                                </div>
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-datas>
                    <tr>
                        <td>{{ datas.id }}</td>
                        <td>{{ datas.name }}</td>
                        <td>{{ datas.divisi }}</td>
                        <td>{{ datas.department }}</td>
                        <td>{{ datas.plant }}</td>
                        <td>
                            <p-tag
                                class="px-2 py-0"
                                [value]="datas.status"
                                [severity]="displayLabel(datas.status)"
                            />
                        </td>
                        <td>
                            <p-tag
                                class="px-2 py-0"
                                [value]="datas.terminated"
                                [severity]="displayLabel(datas.terminated)"
                            />
                        </td>
                        <td>
                            <p-tag
                                class="px-2 py-0"
                                [value]="datas.gender"
                                [severity]="displayLabel(datas.gender)"
                            />
                        </td>
                        <td>{{ datas.family_stats }}</td>
                        <td>{{ datas.no_wa }}</td>
                        <td>{{ datas.souvenir }}</td>
                        <td>
                            <p-tag
                                class="px-2 py-0"
                                [value]="displayText(datas.scan)"
                                [severity]="displayLabel(datas.scan)"
                            />
                        </td>
                        <td>
                            {{
                                datas.scan_date !== '01-01-1970 07:00:00'
                                    ? datas.scan_date
                                    : ''
                            }}
                        </td>
                        <td>{{ datas.kaos_employee1 }}</td>
                        <td>{{ datas.kaos_spouse1 }}</td>
                        <td>{{ datas.kaos_child1 }}</td>
                        <td>{{ datas.kaos_child2 }}</td>
                        <td>{{ datas.kaos_child3 }}</td>
                        <td>{{ datas.kaos_child4 }}</td>
                        <td>{{ datas.kaos_child5 }}</td>
                        <td>{{ datas.kaos_child6 }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>

    <!-- <app-print-label id="print-section" [datas]="this.data"></app-print-label> -->
</div>
